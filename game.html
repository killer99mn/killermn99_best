<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Dual RGB Mani</title>
  <style>
    body {
      margin:0; text-align:center; color:#fff;
      background: linear-gradient(270deg, red, green, blue);
      background-size: 600% 600%;
      animation: rgbBackground 10s ease infinite;
    }
    @keyframes rgbBackground {
      0% {background-position:0% 50%;}
      50% {background-position:100% 50%;}
      100% {background-position:0% 50%;}
    }
    canvas { background:#111; display:none; margin:20px auto; }
    #menu, #endScreen { margin-top:50px; }
    .btn {
      background: linear-gradient(90deg, red, green, blue);
      color:#000; font-size:1.5em;
      padding:20px 40px; border:none; border-radius:10px;
      cursor:pointer; margin:20px;
      transition:0.3s;
    }
    .btn:hover { filter:brightness(1.3); }
    #logo { font-size:2em; color:#0ff; margin-top:20px; cursor:pointer; }
  </style>
</head>
<body>
  <div id="menu">
    <div id="logo">âœ¨ killermn99 âœ¨</div>
    <h1>ğŸ® Ø¨Ø§Ø²ÛŒ Ø¯Ùˆ Ù†ÙØ±Ù‡ Mani</h1>
    <button class="btn" onclick="startGame()">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
  </div>

  <canvas id="gameCanvas" width="800" height="500" style="display:none;"></canvas>

  <div id="endScreen" style="display:none;">
    <h1>ğŸ† Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ</h1>
    <button class="btn" onclick="startGame()">Ø¨Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯</button>
    <button class="btn" onclick="showMenu()">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†Ùˆ</button>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let players = [
      {x:100, y:250, color:'red', bullets:[], lives:3, ammo:5, vy:0},
      {x:700, y:250, color:'blue', bullets:[], lives:3, ammo:5, vy:0}
    ];
    let gameInterval;

    function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);

      ctx.strokeStyle = '#555';
      ctx.beginPath();
      ctx.moveTo(canvas.width/2,0);
      ctx.lineTo(canvas.width/2,canvas.height);
      ctx.stroke();

      players.forEach(p => {
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x,p.y,20,0,Math.PI*2);
        ctx.fill();

        ctx.fillStyle = '#fff';
        ctx.fillText("â¤ï¸".repeat(p.lives), p.x-20, p.y-30);

        p.bullets.forEach(b => {
          ctx.fillStyle = p.color;
          ctx.fillText("âœ–", b.x, b.y);
        });

        ctx.fillStyle = '#fff';
        ctx.fillText("Ammo: "+p.ammo, p.x-20, p.y+50);
      });
    }

    function update() {
      players.forEach(p => {
        p.y += p.vy;
        if(p.y<30) p.y=30;
        if(p.y>canvas.height-30) p.y=canvas.height-30;
      });

      players[0].bullets.forEach(b => b.x += 10);
      players[1].bullets.forEach(b => b.x -= 10);

      players.forEach((p,i) => {
        let opponent = players[1-i];
        opponent.bullets.forEach(b => {
          let dx = b.x - p.x;
          let dy = b.y - p.y;
          if(Math.sqrt(dx*dx+dy*dy) < 20) {
            p.lives--;
            opponent.bullets = opponent.bullets.filter(bb => bb!==b);
            if(p.lives<=0) endGame();
          }
        });
      });

      draw();
    }

    function resetGame() {
      players.forEach((p,i) => {
        p.lives = 3;
        p.x = i===0?100:700;
        p.y = 250;
        p.bullets = [];
        p.ammo = 5;
        p.vy = 0;
      });
    }

    function endGame() {
      clearInterval(gameInterval);
      canvas.style.display='none';
      document.getElementById('endScreen').style.display='block';
    }

    function showMenu() {
      document.getElementById('menu').style.display='block';
      document.getElementById('endScreen').style.display='none';
      canvas.style.display='none';
    }

    function startGame() {
      document.getElementById('menu').style.display='none';
      document.getElementById('endScreen').style.display='none';
      canvas.style.display='block';
      resetGame();
      gameInterval = setInterval(update,50);
    }

    document.addEventListener('keydown', e => {
      if(e.key==='w') players[0].vy=-5;
      if(e.key==='s') players[0].vy=5;
      if(e.key===' ' && players[0].ammo>0) {
        players[0].bullets.push({x:players[0].x+20,y:players[0].y});
        players[0].ammo--;
      }

      if(e.key==='ArrowUp') players[1].vy=-5;
      if(e.key==='ArrowDown') players[1].vy=5;
      if(e.key==='Enter' && players[1].ammo>0) {
        players[1].bullets.push({x:players[1].x-20,y:players[1].y});
        players[1].ammo--;
      }
    });

    document.addEventListener('keyup', e => {
      if(e.key==='w' || e.key==='s') players[0].vy=0;
      if(e.key==='ArrowUp' || e.key==='ArrowDown') players[1].vy=0;
    });

    setInterval(() => {
      players.forEach(p => {
        if(p.ammo<5) p.ammo++;
      });
    },1000);
  </script>
</body>
</html>
